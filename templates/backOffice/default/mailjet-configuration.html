{extends file="admin-layout.tpl"}

{block name="no-return-functions"}
    {$admin_current_location = 'modules'}
{/block}

{block name="page-title"}{intl d="mailjet.bo.default" l='Mailjet configuration'}{/block}

{block name="check-resource"}admin.module{/block}
{block name="check-access"}view{/block}
{block name="check-module"}Mailjet{/block}

{block name="main-content"}
    <div class="container" id="wrapper">
        <ul class="breadcrumb">
            <li><a href="{url path='/admin'}">{intl l="Home" d="mailjet.bo.default"}</a></li>
            <li><a href="{url path='/admin/modules'}">{intl l="Modules" d="mailjet.bo.default"}</a></li>
            <li>{intl l="Mailjet configuration" d="mailjet.bo.default"}</li>
        </ul>

        <div class="general-block-decorator">
            <div class="title title-without-tabs">
                {intl l="Configure mailjet"}
            </div>

            <div class="row">
                <div class="col-md-12">
                    {if $success}
                        <div class="alert alert-success">
                            {intl l="Configuration correctly saved" d="mailjet.bo.default"}
                        </div>
                    {/if}

                    {form name="mailjet.configuration"}
                    <form action="{$current_url}" method="post">
                        {include "includes/inner-form-toolbar.html" hide_flags = 1 close_url={url path='/admin/modules'}}
                        <br/>

                        {form_field form=$form field="success_url"}
                            <input type="hidden" name="{$name}" value="{url path='/admin/modules'}" />
                        {/form_field}

                        {form_hidden_fields form=$form}

                        {form_field form=$form field="api_key"}
                            <div class="form-group {if $error}has-error{/if}">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label for="{$label_attr.for}">
                                            {$label}
                                        </label>
                                    </div>
                                    <div class="col-md-9">
                                        {if $error}<span class="help-block">{$message}</span>{/if}
                                        <input type="text" class="form-control" id="{$label_attr.for}" name="{$name}" value="{$value}" />
                                    </div>
                                </div>
                            </div>
                        {/form_field}

                        {form_field form=$form field="api_secret"}
                            <div class="form-group {if $error}has-error{/if}">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label for="{$label_attr.for}">
                                            {$label}
                                        </label>
                                    </div>
                                    <div class="col-md-9">
                                        {if $error}<span class="help-block">{$message}</span>{/if}
                                        <input type="text" class="form-control" id="{$label_attr.for}" name="{$name}" value="{$value}" />
                                    </div>
                                </div>
                            </div>
                        {/form_field}

                        {form_field form=$form field="ws_address"}
                            <div class="form-group {if $error}has-error{/if}">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label for="{$label_attr.for}">
                                            {$label}
                                        </label>
                                    </div>
                                    <div class="col-md-9">
                                        {if $error}<span class="help-block">{$message}</span>{/if}
                                        <input type="text" class="form-control" id="{$label_attr.for}" name="{$name}" value="{$value}" />
                                    </div>
                                </div>
                            </div>
                        {/form_field}

                        {form_field form=$form field="newsletter_list"}
                            <div class="form-group {if $error}has-error{/if}">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label for="{$label_attr.for}">
                                            {$label}
                                            <a href="#{$label_attr.for}"
                                               class="link tooltip-link"
                                               data-toggle="tooltip"
                                               data-original-title="{intl l="This value is the name of your list mail address (example: the 'xxxxxx' of xxxxxx@lists.mailjet.com)" d="mailjet.bo.default"}">
                                                ?
                                            </a>
                                        </label>
                                    </div>
                                    <div class="col-md-9">
                                        {if $error}<span class="help-block">{$message}</span>{/if}
                                        <input type="text" class="form-control" id="{$label_attr.for}" name="{$name}" value="{$value}" />
                                    </div>
                                </div>
                            </div>
                        {/form_field}

                        {include "includes/inner-form-toolbar.html" hide_flags = 1 close_url={url path='/admin/modules'} page_bottom = 1}
                    </form>
                    {/form}
                </div>
            </div>
        </div>
    </div>
{/block}

{block name="javascript-initialization"}
    <script>
        $(function()
        {
            $(".tooltip-link").tooltip();
        });
    </script>
{/block}